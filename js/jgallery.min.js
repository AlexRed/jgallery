/*!
 * jGallery v0.9.6
 * http://jgallery.jakubkowalczyk.pl/
 *
 * Released under the MIT license
 *
 * Date: 2013-11-22 
 */
(function(e){var i={autostart:false,canClose:true,canResize:true,backgroundColor:"#000",textColor:"#fff",thumbnails:true,thumbnailsFullScreen:true,thumbType:"image",thumbnailsPosition:"bottom",thumbWidth:100,thumbHeight:100,thumbWidthOnFullScreen:100,thumbHeightOnFullScreen:100,showEffect:"rotate-room-right",hideEffect:"rotate-room-right",showTimingFunction:"linear",hideTimingFunction:"linear",showDuration:"0.5s",hideDuration:"0.5s",zoomSize:"fitToWindow",title:true,titleShowEffect:"fade",titleHideEffect:"fade",titleShowTimingFunction:"ease",titleHideTimingFunction:"ease",titleShowDuration:"0.5s",titleHideDuration:"0.5s",slideshow:true,slideshowAutostart:false,slideshowCanRandom:true,slideshowRandom:false,slideshowRandomAutostart:false,slideshowInterval:"8s",preloadAll:false,disabledOnIE7AndOlder:true,initGallery:function(){},showPhoto:function(){},beforeLoadPhoto:function(){},afterLoadPhoto:function(){},showGallery:function(){},closeGallery:function(){}};var l;var p;e(function(){l=e("head");p=e("body")});var o=e(window);var r=["slide-up","slide-down","slide-right","slide-left","slide-up-left","slide-up-right","slide-down-left","slide-down-right","fade"];var t=r.length;var g=function(w,v){this.intJgalleryId=v;this.$element=w};g.prototype={clear:function(){this.$element.stop(false,true).css({width:0});return this},start:function(v,w){this.$element.animate({width:v},parseInt(e.fn.jGalleryOptions[this.intJgalleryId].slideshowInterval)*1000,"linear",w);return this},pause:function(){this.$element.stop(true);this.clear();return this}};var m=function(v){this.$element=v;this.$title=this.$element.find(".title")};m.prototype={bindEvents:function(x,w){var v=this;this.getElement().on({click:function(y){v.menuToggle();y.stopPropagation()}});this.getItemsOfMenu().on({click:function(){var y=e(this);if(y.is(".active")){return}w(x.filter('[data-jgallery-album-title="'+y.attr("data-jgallery-album-title")+'"]'))}});e("html").on("click",function(){v.menuHide()})},setTitle:function(v){this.$title.html(v)},getTitle:function(){return this.$title.html()},getListOfAlbums:function(){return this.getElement().find(".menu")},getElement:function(){return this.$element},getItemsOfMenu:function(){return this.getListOfAlbums().find(".item")},appendToMenu:function(v){this.getListOfAlbums().append(v)},menuToggle:function(){this.getElement().toggleClass("active")},menuHide:function(){this.getElement().removeClass("active")}};var c=function(w,v){this.$element=w;this.booIsAlbums=v;this.$tmp;this.intI=1;this.intJ=1;this.intNo;this.$thumbnailsContainerInner=e(".jgallery").eq(-1).find(".thumbnails .container-inner");this.start()};c.prototype={start:function(){var v=this;e("body").append('<div id="jGalleryTmp" style="position: absolute; top: 0; left: 0; width: 0; height: 0; z-index: -1; overflow: hidden;">'+this.$element.html()+"</div>");this.$tmp=e("#jGalleryTmp");if(this.booIsAlbums){this.$tmp.find(".album:has(a:has(img:first-child:last-child))").each(function(){v.insertAlbum(e(this))})}else{this.insertImages(this.$tmp,this.$thumbnailsContainerInner)}this.$tmp.remove()},insertAlbum:function(w){var v=w.is("[data-jgallery-album-title]")?w.attr("data-jgallery-album-title"):"Album "+this.intJ;var x=this.$thumbnailsContainerInner.append('<div class="album" data-jgallery-album-title="'+v+'"></div>').children(":last-child");if(this.intJ==1){x.addClass("active")}this.insertImages(w,x);this.intJ++},insertImages:function(w,x){var v=this;this.intNo=1;w.find("a:has(img:first-child:last-child)").each(function(){v.insertImage(e(this),x)})},insertImage:function(v,w){w.append(v.addClass("hidden"));w.children(":last-child").attr("data-jgallery-photo-id",this.intI++).attr("data-jgallery-number",this.intNo++)}};var k=function(v){this.$element=v.find(".thumbnails");this.$a=this.getElement().find("a");this.$img=this.getElement().find("img");this.$container=this.getElement().find(".container");this.$albums=this.getElement().find(".album");this.$btnNext=this.getElement().children(".next");this.$btnPrev=this.getElement().children(".prev");this.intJgalleryId=v.attr("data-jgallery-id");this.isJgalleryInitialized=v.is("[data-jgallery-id]")};k.prototype={getElement:function(){return this.$element},init:function(){this.getElement().removeClass("square number images thumbnails-left thumbnails-right thumbnails-top thumbnails-bottom thumbnails-horizontal thumbnails-vertical");this.getElement().addClass("thumbnails-"+e.fn.jGalleryOptions[this.intJgalleryId].thumbnailsPosition);if(this.isVertical()){this.getElement().addClass("thumbnails-vertical")}if(this.isHorizontal()){this.getElement().addClass("thumbnails-horizontal")}if(e.fn.jGalleryOptions[this.intJgalleryId].thumbType=="image"){this._initImages()}if(e.fn.jGalleryOptions[this.intJgalleryId].thumbType=="square"){this._initSquare()}if(e.fn.jGalleryOptions[this.intJgalleryId].thumbType=="number"){this._initNumber()}},show:function(){var v=this;if(!this.getElement().is(".hidden")){return}this.getElement().removeClass("hidden");if(!this.getElement().is(".loaded")){this.getElement().jLoader({start:function(){},success:function(){v._showNextThumb();v.$a.parent(".album:not(.active)").children(".hidden").removeClass("hidden");v.getElement().addClass("loaded");v.$img.each(function(){var w=e(this);h(w)?w.css("max-height","100%"):w.css("max-width","100%")})}})}else{this._showNextThumb();this.$a.parent(".album:not(.active)").children(".hidden").removeClass("hidden")}},hide:function(){this.getElement().addClass("hidden").find("a").addClass("hidden")},isHorizontal:function(){return e.fn.jGalleryOptions[this.intJgalleryId].thumbnailsPosition=="top"||e.fn.jGalleryOptions[this.intJgalleryId].thumbnailsPosition=="bottom"},isVertical:function(){return e.fn.jGalleryOptions[this.intJgalleryId].thumbnailsPosition=="left"||e.fn.jGalleryOptions[this.intJgalleryId].thumbnailsPosition=="right"},isFullScreen:function(){return this.getElement().is(".full-screen")},refreshNavigation:function(){if(this.isVertical()||this.isFullScreen()){this._refreshVerticalNavigation()}else{if(this.isHorizontal()){this._refreshHorizontalNavigation()}}},center:function(v){if(this.isHorizontal()){this._horizontalCenter(v)}if(this.isVertical()){this._verticalCenter(v)}},_initSquare:function(){this.getElement().addClass("square")},_initNumber:function(){this.getElement().addClass("number");this._initSquare()},_initImages:function(){this.getElement().addClass("images");e("head").append('                <style type="text/css">\n                    .jgallery .thumbnails a {\n                        width: '+e.fn.jGalleryOptions[this.intJgalleryId].thumbWidth+"px;\n                        height: "+e.fn.jGalleryOptions[this.intJgalleryId].thumbHeight+"px;\n                        font-size: "+e.fn.jGalleryOptions[this.intJgalleryId].thumbHeight+"px;\n                    }\n                    .jgallery .thumbnails.full-screen a {\n                        width: "+e.fn.jGalleryOptions[this.intJgalleryId].thumbWidthOnFullScreen+"px;\n                        height: "+e.fn.jGalleryOptions[this.intJgalleryId].thumbHeightOnFullScreen+"px;\n                        font-size: "+e.fn.jGalleryOptions[this.intJgalleryId].thumbHeightOnFullScreen+"px;\n                    }\n                    .jgallery .thumbnails-horizontal {\n                        height: "+parseInt(e.fn.jGalleryOptions[this.intJgalleryId].thumbHeight+2)+"px;\n                    }\n                    .jgallery .thumbnails-vertical {\n                        width: "+parseInt(e.fn.jGalleryOptions[this.intJgalleryId].thumbWidth+2)+"px;\n                    }\n                    .jgallery .thumbnails-top.hidden {\n                        top: -"+e.fn.jGalleryOptions[this.intJgalleryId].thumbHeight+"px;\n                    }\n                    .jgallery .thumbnails-bottom.hidden {\n                        bottom: -"+e.fn.jGalleryOptions[this.intJgalleryId].thumbHeight+"px;\n                    }\n                    .jgallery .thumbnails-left.hidden {\n                        left: -"+e.fn.jGalleryOptions[this.intJgalleryId].thumbWidth+"px;\n                    }\n                    .jgallery .thumbnails-right.hidden {\n                        right: -"+e.fn.jGalleryOptions[this.intJgalleryId].thumbWidth+"px;\n                    }\n                </style>\n            ");if(this.isJgalleryInitialized){return}this.hide()},_showNextThumb:function(){var v=this;var w=this.$a.parent(".active").children(".hidden").eq(0);setTimeout(function(){w.removeClass("hidden");if(w.length){v._showNextThumb()}},70)},_horizontalCenter:function(w){var v=this;if(w.length!==1){return}this.$container.stop(false,true).animate({scrollLeft:w.position().left-this.$container.scrollLeft()*-1-w.outerWidth()/-2-this.$container.outerWidth()/2},function(){v.refreshNavigation()})},_verticalCenter:function(w){var v=this;if(w.length!==1){return}this.$container.stop(false,true).animate({scrollTop:w.position().top-this.$container.scrollTop()*-1-w.outerHeight()/-2-this.$container.outerHeight()/2},function(){v.refreshNavigation()})},_refreshHorizontalNavigation:function(){var w=this.getElement().find("div.active");var v=e.fn.jGalleryOptions[this.intJgalleryId].thumbType=="image"?this.$a.outerWidth(true)*w.find("img").length:this.$a.outerWidth(true)*w.find("a").length;this.$container.scrollLeft()>0?this.$btnPrev.addClass("visible"):this.$btnPrev.removeClass("visible");v>this.$container.width()+this.$container.scrollLeft()?this.$btnNext.addClass("visible"):this.$btnNext.removeClass("visible")},_refreshVerticalNavigation:function(){this.$container.scrollTop()>0?this.$btnPrev.addClass("visible"):this.$btnPrev.removeClass("visible");this.$container.find(".container-inner").height()>this.$container.height()+this.$container.scrollTop()?this.$btnNext.addClass("visible"):this.$btnNext.removeClass("visible")}};function n(Y,ak){var V;var aR;var ah;var aC;var at;var N;var R=e();var O=e();var aE;var aN;var aI;var H;var ag;var ax;var aG;var ay;var aD;var aM;var aL;var W;var aA;var X;var ad;var A;var aw=false;var aa;var aH=false;var aQ;var ap;var y;var aF;var U=Y.find(".album:has(a:has(img:first-child:last-child))").length>1;var E=false;var C=parseInt(e(".jgallery").length+1);var az=this;function z(){return Y.is("[data-jgallery-id]")}if(z()){C=Y.attr("data-jgallery-id")}e.fn.jGalleryOptions[C]=z()?e.extend(e.fn.jGalleryOptions[C],ak):e.extend({},i,ak);if(e.fn.jGalleryOptions[C].disabledOnIE7AndOlder&&s()){return}function Z(){at=aA.find(".resize");e.fn.jGalleryOptions[C].canResize?at.show():at.hide();e.fn.jGalleryOptions[C].canClose?aA.find(".close").show():aA.find(".close").hide();if(!e.fn.jGalleryOptions[C].thumbnails){aI.getElement().hide();e.fn.jGalleryOptions[C].thumbnailsPosition=""}else{aI.getElement().show();if(e.fn.jGalleryOptions[C].thumbnailsPosition==""){e.fn.jGalleryOptions[C].thumbnailsPosition=i.thumbnailsPosition}}R=aA.find(".slideshow");e.fn.jGalleryOptions[C].slideshow?R.show():R.hide();O=aA.find(".random");e.fn.jGalleryOptions[C].slideshow&&e.fn.jGalleryOptions[C].slideshowCanRandom?O.show():O.hide();e.fn.jGalleryOptions[C].slideshow&&e.fn.jGalleryOptions[C].slideshowCanRandom&&e.fn.jGalleryOptions[C].slideshowRandom?O.addClass("active"):O.removeClass("active");aE=aA.find(".full-screen");aD=aI.getElement().find(".close");e.fn.jGalleryOptions[C].thumbnailsFullScreen?aE.add(aD).show():aE.add(aD).hide();e.fn.jGalleryOptions[C].thumbnailsFullScreen?aA.find(".change-album").show():aA.find(".change-album").hide();l.append(q({strBg:e.fn.jGalleryOptions[C].backgroundColor,strText:e.fn.jGalleryOptions[C].textColor}))}function Q(){aR=e(".jgallery").filter('[data-jgallery-id="'+C+'"]');aA=aR.children(".zoom-container");ad=aA.children(".title");ah=aA.children(".prev");aC=aA.children(".next");W=aA.children(".zoom");N=new g(aA.children(".progress"),C);aI=new k(aR);H=aI.getElement().find(".container");ag=aI.getElement().children(".prev");ax=aI.getElement().children(".next");aG=aI.getElement().find("a");ay=aI.getElement().find("img");aM=aI.getElement().find(".album");if(aM.length==0){aM=aI.getElement().find(".container-inner").addClass("active")}}if(z()){Q();M();aI.init();Z();return}function ao(){e.fn.jGalleryOptions[C].initGallery();Y.attr("data-jgallery-id",C);e("body").append('                <div class="jgallery" style="display: none;" data-jgallery-id="'+C+'">                    <div class="thumbnails hidden">                        <div class="container"><div class="container-inner"></div></div>                        <span class="prev btn hidden"><span class="icon-chevron-left ico"></span></span>                        <span class="next btn hidden"><span class="icon-chevron-right ico"></span></span>                    </div>                    <div class="zoom-container">                        <div class="title before"></div>                        <div id="pt-main" class="zoom before pt-perspective">                            <div class="left" />                            <div class="right" />                        </div>                        <span class="icon-chevron-left prev btn btn-large"></span>                        <span class="icon-chevron-right next btn btn-large"></span>                        <span class="progress"></span>                        <div class="nav"></div>                        <div class="nav-bottom"></div>                        <canvas id="canvas" width="1920" height="1200"></canvas>                    </div>                </div>');new c(Y,U);Q();M();aI.init();aA.find(".nav").append('<span class="icon- resize btn btn-small"></span>');aA.find(".nav").append('<span class="icon-remove close btn btn-small"></span>');aA.find(".nav-bottom").append('<span class="icon- icon-play slideshow btn btn-small"></span>');aA.find(".nav-bottom").append('<span class="icon- icon-random random btn btn-small inactive"></span>');aA.find(".nav-bottom").append('<span class="icon- icon-th full-screen btn btn-small"></span>');aI.getElement().append('<span class="icon- icon-remove btn close btn-small"></span>');(function(){if(U){aA.find(".nav-bottom").append('                        <span class="icon- icon-list-ul change-album btn btn-small">                            <span class="menu btn"></span>                            <span class="title"></span>                        </span>                    ');aN=new m(aA.find(".change-album"));aM.each(function(){var aT=e(this).attr("data-jgallery-album-title");aN.appendToMenu('<span class="item" data-jgallery-album-title="'+aT+'">'+aT+"</span>")});aI.getElement().append(aN.getElement().outerHtml());aN=new m(aN.getElement().add(aI.getElement().children(":last-child")));aN.bindEvents(aM,I)}})();Z();if(e.fn.jGalleryOptions[C].zoomSize=="fitToWindow"){at.addClass("icon-resize-full")}if(e.fn.jGalleryOptions[C].zoomSize=="100%"){at.addClass("icon-resize-small")}aS();aI.refreshNavigation();J();an();aJ()}function aJ(){Y.find("a").on({click:function(aT){var aU=e(this);aT.preventDefault();I(aM.filter('[data-jgallery-album-title="'+aU.parents("[data-jgallery-album-title]").attr("data-jgallery-album-title")+'"]'));aK(aU)}});aG.on({click:function(aT){var aU=e(this);aT.preventDefault();if(aU.is(":not(.active)")){w();aK(aU)}else{if(aI.isFullScreen()){au()}}}});ag.on({click:function(){G()}});ax.on({click:function(){K()}});ah.add(W.find(".left")).on({click:function(){w();v()}});aC.add(W.find(".right")).on({click:function(){w();S()}});aA.find(".close").on({click:function(){aq()}});O.on({click:function(){x()}});at.on({click:function(){aj()}});R.on({click:function(){F()}});aE.on({click:function(){av()}});aD.on({click:function(){au()}})}function M(){if(!e.fn.jGalleryOptions[C].preloadAll){return}aG.each(function(){var aT=e(this);if(!aP(aT)){W.append('<div class="container pt-page before '+B(e.fn.jGalleryOptions[C].showEffect)+'"><img src="'+aT.attr("href")+'" /></div>')}})}function aS(){if(!j()){aR.addClass("text-shadow")}}function L(){var aU;var aT;if(aI.isHorizontal()){aU=aR.width();aT=aR.height()-aI.getElement().outerHeight(true)}else{if(aI.isVertical()){aU=aR.width()-aI.getElement().outerWidth(true);aT=aR.height()}else{aU=aR.width();aT=aR.height()}}return aU/aT}function an(){var aT=aA.find(".nav-bottom").outerHeight();aA.css({width:aI.isVertical()?aR.width()-aI.getElement().outerWidth(true):"auto",height:aI.isHorizontal()?aR.height()-aI.getElement().outerHeight(true)-aT:aR.height()-aT,"margin-top":e.fn.jGalleryOptions[C].thumbnailsPosition=="top"?aI.getElement().outerHeight(true):0,"margin-left":e.fn.jGalleryOptions[C].thumbnailsPosition=="left"?aI.getElement().outerWidth(true):0,"margin-right":e.fn.jGalleryOptions[C].thumbnailsPosition=="right"?aI.getElement().outerWidth(true):0})}function ae(){var aT=W.find("img.active");var aU=aA.find(".nav-bottom").outerHeight();aT.css({width:"auto",height:"auto","min-width":0,"min-height":0,"max-width":aI.isVertical()?aR.width()-aI.getElement().outerWidth(true):aR.width(),"max-height":aI.isHorizontal()?aR.height()-aI.getElement().outerHeight(true)-aU:aR.height()-aU});aT.css({"margin-top":-aT.height()/2,"margin-left":-aT.width()/2});at.addClass("icon-resize-full").removeClass("icon-resize-small")}function am(){var aT=W.find("img.active");var aU=aA.find(".nav-bottom").outerHeight();aT.css({"max-width":"none","max-height":"none","min-width":aI.isVertical()?aR.width()-aI.getElement().outerWidth(true):aR.width(),"min-height":aI.isHorizontal()?aR.height()-aI.getElement().outerHeight(true)-aU:aR.height()-aU});if(aa/L()>1){aT.css({width:"auto",height:aI.isHorizontal()?aR.height()-aI.getElement().outerHeight(true)-aU:aR.height()-aU})}else{aT.css({width:aI.isVertical()?aR.width()-aI.getElement().outerWidth(true):aR.width(),height:"auto"})}aT.css({"margin-top":-aT.height()/2,"margin-left":-aT.width()/2});at.addClass("icon-resize-small").removeClass("icon-resize-full")}function ar(){if(aI.isFullScreen()){return}an();if(e.fn.jGalleryOptions[C].zoomSize=="fitToWindow"){ae()}else{if(e.fn.jGalleryOptions[C].zoomSize=="100%"){am()}}W.addClass("visible")}function aj(){var aT=W.find("img.active");aT.stop(false,true).fadeOut(parseFloat(e.fn.jGalleryOptions[C].showDuration)*1000,function(){if(e.fn.jGalleryOptions[C].zoomSize=="fitToWindow"){e.fn.jGalleryOptions[C].zoomSize="100%";am()}else{if(e.fn.jGalleryOptions[C].zoomSize=="100%"){e.fn.jGalleryOptions[C].zoomSize="fitToWindow";ae()}}aT.fadeIn(parseFloat(e.fn.jGalleryOptions[C].hideDuration)*1000)})}function J(){var aT=aI.getElement().find("div.active a.active");aT.prev("a").length==1?ah.removeClass("hidden"):ah.addClass("hidden");aT.next("a").length==1?aC.removeClass("hidden"):aC.addClass("hidden")}function G(){if(aI.isVertical()||aI.isFullScreen()){H.stop(false,true).animate({scrollTop:"-="+o.height()*0.7},function(){aI.refreshNavigation()})}else{if(aI.isHorizontal()){H.stop(false,true).animate({scrollLeft:"-="+o.width()*0.7},function(){aI.refreshNavigation()})}}}function K(){if(aI.isVertical()||aI.isFullScreen()){H.stop(false,true).animate({scrollTop:"+="+o.height()*0.7},function(){aI.refreshNavigation()})}else{if(aI.isHorizontal()){H.stop(false,true).animate({scrollLeft:"+="+o.width()*0.7},function(){aI.refreshNavigation()})}}}function av(){w();aI.getElement().addClass("full-screen");if(aI.isHorizontal()){aI.getElement().addClass("thumbnails-vertical").removeClass("thumbnails-horizontal")}aI._refreshVerticalNavigation()}function au(){aI.getElement().removeClass("full-screen");if(aI.isHorizontal()){aI.getElement().addClass("thumbnails-horizontal").removeClass("thumbnails-vertical")}ar();aI.refreshNavigation()}function aq(){if(!e.fn.jGalleryOptions[C].canClose){return}aR.filter(":visible").stop(false,true).addClass("hidden").fadeOut(500,function(){p.css({overflow:"visible"})});aH=false;clearTimeout(A);W.hide().removeAttr("src");aA.find("img.active").removeClass("active");ad.addClass("hidden");ah.addClass("hidden");aC.addClass("hidden");aI.hide();w();p.overlay({hide:true});o.off("scroll resize",ar);o.off("scroll resize",function(){aI.refreshNavigation()});e.fn.jGalleryOptions[C].closeGallery()}function D(){o.on("scroll resize",ar);o.on("scroll resize",function(){aI.refreshNavigation()});p.css({overflow:"hidden"});if(typeof aL=="undefined"){al()}aR.not(":visible").removeClass("hidden").stop(false,true).fadeIn(500);aI.show();an();p.overlay({show:true,showLoader:false});ad.removeClass("hidden");e.fn.jGalleryOptions[C].showGallery()}function B(aT){return aT=="random"?r[Math.floor((Math.random()*t))]:aT}function aK(aT){var aU=aT.children("img");if(!z()){ab()}if(aH){return}aH=true;e.fn.jGalleryOptions[C].showPhoto();if(aR.is(":not(:visible)")){D()}au();if(U){if(aN.getTitle()==""){aN.setTitle(aT.parents(".album").eq(0).attr("data-jgallery-album-title"))}}P(aT);if(W.find("img.active").attr("src")===aT.attr("href")){aH=false;return}J();clearTimeout(V);a(e(W).add(X),e.fn.jGalleryOptions[C].hideDuration);d(e(W).add(X),e.fn.jGalleryOptions[C].hideTimingFunction);ap=B(e.fn.jGalleryOptions[C].hideEffect);W.addClass("zoom");W.find("img.active").parent().removeClass("visible").removeClass(aQ).addClass("after").addClass(ap);aQ=B(e.fn.jGalleryOptions[C].showEffect);W.find("img:not(.active)").parent().attr("class","container pt-page before "+aQ);if(e.fn.jGalleryOptions[C].title){a(ad,e.fn.jGalleryOptions[C].titleHideDuration);d(ad,e.fn.jGalleryOptions[C].titleHideTimingFunction);aF=B(e.fn.jGalleryOptions[C].titleHideEffect);if(typeof y!="undefined"){ad.removeClass(y)}ad.addClass("after "+aF)}A=setTimeout(function(){var aV=aP(aT);if(!aV){W.append('<div class="container pt-page before '+aQ+'"><img src="'+aT.attr("href")+'" /></div>')}aA.find("img.active").removeClass();aA.find('[src="'+aT.attr("href")+'"]').addClass("active").parent().addClass(aQ);if(e.fn.jGalleryOptions[C].title&&aU.is("[alt]")){y=B(e.fn.jGalleryOptions[C].titleShowEffect);ad.removeClass(aF).addClass(y).removeClass("after").addClass("before")}if(!aV||(e.fn.jGalleryOptions[C].preloadAll&&!E)){E=true;aA.overlay({show:true,showLoader:true});e.fn.jGalleryOptions[C].beforeLoadPhoto();af(W,aT)}else{aO(aU)}},Math.max(parseFloat(e.fn.jGalleryOptions[C].hideDuration)*1000,parseFloat(e.fn.jGalleryOptions[C].titleHideDuration)*1000))}function aP(aT){return W.find("img").filter('[src="'+aT.attr("href")+'"]').length>0}function af(aT,aW){var aX=aW.children("img");var aV=0;var aU=e.fn.jGalleryOptions[C].preloadAll?aT:aT.find("img.active");aU.jLoader({interval:500,skip:".loaded",start:function(){if(e.fn.jGalleryOptions[C].preloadAll){aA.find(".overlay .imageLoaderPositionAbsolute:not(:has(.progress-value))").addClass("preloadAll").append('<span class="progress-value"></span>');aA.find(".progress-value").html("0")}else{aA.find(".overlay .imageLoaderPositionAbsolute:not(:has(.icon-spin))").append('<span class="icon-spin icon-spinner"></span>')}},success:function(){aT.find("img").addClass("loaded");aA.overlay({hide:true,hideLoader:true});clearInterval(V);V=setTimeout(function(){aO(aX)},500)},progress:function(aY){if(!e.fn.jGalleryOptions[C].preloadAll){return}aV=aY.percent;aA.find(".overlay .imageLoaderPositionAbsolute").find(".progress-value").html(aV)}})}function aO(aU){var aT=W.find("img.active");a(e(W).add(X),e.fn.jGalleryOptions[C].showDuration);d(e(W).add(X),e.fn.jGalleryOptions[C].showTimingFunction);if(e.fn.jGalleryOptions[C].title&&aU.is("[alt]")){ad.html(aU.attr("alt")).removeClass("before").removeClass("after");a(ad,e.fn.jGalleryOptions[C].titleShowDuration);d(ad,e.fn.jGalleryOptions[C].titleShowTimingFunction)}W.show().find("img.active").parent().removeClass("before");aa=aT.width()/aT.height();ar();aI.refreshNavigation();if(aw){T()}e.fn.jGalleryOptions[C].afterLoadPhoto();aH=false;if(e.fn.jGalleryOptions[C].autostart&&e.fn.jGalleryOptions[C].slideshowAutostart&&e.fn.jGalleryOptions[C].slideshow){e.fn.jGalleryOptions[C].slideshowAutostart=false;ac()}}function ab(){e("body").overlay({imageLoaderPositionAbsolute:true,fadeIn:false,show:true});ao()}function v(){var aT=aG.filter(".active").prev("a");if(aT.length==1){aK(aT)}}function S(){var aT=aG.filter(".active").next("a");if(aT.length==1){aK(aT)}}function aB(){var aT=aG.filter(".active").next("a");if(aT.length==0){aT=aM.filter(".active").find("a").eq(0)}aK(aT)}function ai(){var aT=aM.filter(".active").find("a:not(.active)");aK(aT.eq(Math.floor(Math.random()*aT.length)))}function P(aU){var aT=aU.find("img");var aV=aM.filter(".active");var aU=aV.find('img[src="'+aT.attr("src")+'"]').parent("a").eq(0);aI.getElement().find("a").removeClass("active");aU.addClass("active");if(aV.find("a.active").length==0){aV.find("a:first-child").eq(0).addClass("active")}aI.center(aU)}function I(aT){if(!U){return}aM.not(aT.get(0)).removeClass("active");aT.addClass("active");aN.getListOfAlbums().find(".item").removeClass("active").filter('[data-jgallery-album-title="'+aT.attr("data-jgallery-album-title")+'"]').addClass("active");aN.setTitle(aT.attr("data-jgallery-album-title"));aI.refreshNavigation();if(!aI.getElement().is(".full-screen")&&aR.is(":visible")){aK(aT.find("a").eq(0))}}function al(){aL=e('body > .overlay > [class*="imageLoader"]');if(e.fn.jGalleryOptions[C].thumbnails){if(e.fn.jGalleryOptions[C].thumbnailsPosition=="top"){aL.css({"margin-top":"+="+aI.getElement().outerHeight(true)/2})}if(e.fn.jGalleryOptions[C].thumbnailsPosition=="bottom"){aL.css({"margin-top":"-="+aI.getElement().outerHeight(true)/2})}}}function F(){R.is(".icon-play")?ac():w()}function ac(){if(aH||aw){return}aw=true;R.removeClass("icon-play").addClass("icon-stop");T()}function w(){N.pause();R.removeClass("icon-stop").addClass("icon-play");aw=false}function T(){N.clear().start(aA.width(),function(){N.clear();e.fn.jGalleryOptions[C].slideshowRandom?ai():aB()})}function x(){if(e.fn.jGalleryOptions[C].slideshowRandom){O.removeClass("active");e.fn.jGalleryOptions[C].slideshowRandom=false}else{O.addClass("active");e.fn.jGalleryOptions[C].slideshowRandom=true}}if(e.fn.jGalleryOptions[C].autostart){aK(Y.find("a:has(img:first-child:last-child)").eq(0))}else{ao()}e("html").on({keydown:function(aT){if(aR.is(":visible")){if(aT.which==27){aT.preventDefault();if(aI.getElement().is(".full-screen")){au();return}aq()}if(aT.which==37){aT.preventDefault();v()}if(aT.which==39){aT.preventDefault();S()}}}});return{"$albums":aM,setActiveAlbum:I}}e.fn.jGallery=function(v){return this.each(function(){n(e(this),v)})};e.fn.jGalleryOptions=[];e.fn.overlay=function(v){var w={show:false,hide:false,showLoader:false,hideLoader:false,fadeIn:true,fadeOut:true,fadeInLoader:true,fadeOutLoader:true,afterInit:function(){}};v=e.extend({},w,v);this.each(function(){var E=e(this),F,D,C=E.is(".overlayContainer:has(.overlay)"),B=function(){var J=Math.max(E.offset().top,e("body, html").scrollTop()),I=Math.min(E.offset().top+E.outerHeight(),e("body, html").scrollTop()+e(window).height()),H=J+(I-J)/2-E.offset().top;D.css({top:H+"px"})},z=function(){E.children(".overlay").css({width:E.outerWidth(),height:E.is("body")?e("html").outerHeight():E.outerHeight()})},A=function(){v.fadeIn?F.fadeIn(500):F.show()},y=function(){v.fadeOut?F.fadeOut(500):F.hide()},G=function(){v.fadeInLoader?D.not(":visible").fadeIn(500):D.not(":visible").show()},x=function(){v.fadeOutLoader?D.filter(":visible").fadeOut(500):D.filter(":visible").hide()};e(window).scroll(function(){B()});e(window).resize(function(){B();z()});if(E.is("table")){if(E.parent().is(".overlayContainer")){E=E.parent()}}if(!C){if(E.is("table")){E.wrap("<div></div>");E=E.parent()}E.addClass("overlayContainer");E.append('<div class="overlay" style="display: none;"><div class="imageLoaderPositionAbsolute" style="display: none;"></div></div>');v.afterInit()}F=E.children(".overlay");D=E.find(".imageLoaderPositionAbsolute");F.stop(false,true);D.stop(false,true);if(v.show){A()}else{if(v.hide){y()}}if(v.showLoader){G()}else{if(v.hideLoader){x()}}B();z()})};e.fn.jLoader=function(w){w=e.extend({interval:1000,skip:":not(*)",start:function(){e("body").overlay({fadeIn:false,fadeOut:false,show:true,showLoader:true});e("body").show()},success:function(){e("body").overlay({hide:true})},progress:function(){}},w);function v(x){return(/https?\:\/\//.exec(x))}this.each(function(){var D=e(this);var B=e();var z=e();var C;var A=0;function y(){var F=true;var H=0;var E=0;var G;z.each(function(){H++;if(e(this)[0].complete){E++}else{F=false}if(H==A){G=parseInt(E*100/A);w.progress({percent:G});if(F){clearTimeout(C);B.remove();w.success()}else{C=setTimeout(y,w.interval)}}})}function x(){var F=z.eq(0);var E=new XMLHttpRequest();E.open("GET",F.attr("src"),true);E.onprogress=function(G){if(G.lengthComputable){w.progress({percent:parseInt(G.loaded/G.total*100)})}};E.onloadend=function(){B.remove();w.success()};E.send()}D.append('<div class="jLoaderTmp" style="position: absolute; width: 0; height: 0; line-height: 0; font-size: 0; visibility: hidden; overflow: hidden; z-index: -1;"></div>');B=D.children(".jLoaderTmp:last-child");e(D).add(D.find("*")).not(w.skip).each(function(){var E;if(e(this).css("background-image")!="none"){E=e(this).css("background-image");if(/url/.exec(E)){E=E.replace('"',"").replace("'","").replace(" ","").replace("url(","").replace(")","");B.append('<img src="'+E+'">')}}});z=D.find("img:not( "+w.skip+")");if(D.is("img")){if(!D.is(w.skip)){z=z.add(D)}}A=parseInt(z.length);w.start();y()})};e.fn.outerHtml=function(){return(!this.length)?this:(this[0].outerHTML||(function(v){var x=document.createElement("div");x.appendChild(v.cloneNode(true));var w=x.innerHTML;x=null;return w})(this[0]))};function b(v){return e.browser.webkit?v.css("-webkit-transition"):v.css("transition")}function f(v,w){v.css({"-webkit-transition":w,"-moz-transition-duration":w,"-o-transition-duration":w,transition:w})}function a(w,v){w.css({"-webkit-transition-duration":v,"-moz-transition-duration":v,"-o-transition-duration":v,"transition-duration":v})}function d(w,v){w.css({"-webkit-transition-timing-function":v,"-moz-transition-timing-function":v,"-o-transition-timing-function":v,"transition-timing-function":v})}function j(){var x=false;if(navigator.appName=="Microsoft Internet Explorer"){var v=navigator.userAgent;var w=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(w.exec(v)!=null){x=true}}return x}function s(){var x=false;if(navigator.appName=="Microsoft Internet Explorer"){var v=navigator.userAgent;var w=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(w.exec(v)!=null){x=parseFloat(RegExp.$1);x=x<8}}return x}function u(w,v){return Math.floor(Math.random()*(v-w+1))+w}function h(v){return v.width()>v.height()}function q(x){x=e.extend({strBg:"rgb( 0, 0, 0 )",strText:"rgb( 255, 255, 255 )"},x);var y=tinycolor(x.strBg).toRgb();var v=y.r+y.g+y.b>375?tinycolor.darken(x.strBg).toRgb():tinycolor.lighten(x.strBg).toRgb();var w=tinycolor(x.strText).toRgb();return'            <style type="text/css">            .jgallery {              background: rgb('+y.r+","+y.g+", "+y.b+");            }            .jgallery .btn {              color: rgb("+w.r+","+w.g+", "+w.b+");              background: rgb("+y.r+","+y.g+", "+y.b+");            }            .jgallery .btn.active {              color: rgb("+w.r+","+w.g+", "+w.b+");            }            .jgallery .btn:hover {              text-shadow: none;              text-shadow: 0 0 .15em rgba("+w.r+","+w.g+", "+w.b+",.75), 0 0 .45em rgba("+w.r+","+w.g+", "+w.b+",.5);            }            .jgallery .change-album .menu {              background: rgb("+y.r+","+y.g+", "+y.b+");            }            .jgallery .change-album .menu .item {              border-color: rgb("+y.r+","+y.g+", "+y.b+");              color: rgb("+w.r+","+w.g+", "+w.b+");            }            .jgallery .change-album .menu .item:hover {              background: rgb("+w.r+","+w.g+", "+w.b+");              color: rgb("+y.r+","+y.g+", "+y.b+");            }            .jgallery .zoom-container .title {              color: rgb("+w.r+","+w.g+", "+w.b+");            }            .jgallery .zoom-container .nav-bottom {              background: rgb("+v.r+","+v.g+", "+v.b+");            }            .jgallery .zoom-container .nav-bottom .btn {                background: rgb("+v.r+","+v.g+", "+v.b+");            }            .jgallery .thumbnails {              background: rgb("+v.r+","+v.g+", "+v.b+");            }            .jgallery .thumbnails .ico {              color: rgb("+w.r+","+w.g+", "+w.b+");            }            .jgallery .thumbnails.full-screen .prev:before {              background-image: -webkit-gradient(linear,left 0%,left 100%,from(rgba( "+y.r+","+y.g+", "+y.b+", 1 )),to(rgba( "+y.r+","+y.g+", "+y.b+", 0)));              background-image: -webkit-linear-gradient(top,rgba( "+y.r+","+y.g+", "+y.b+", 1 ),0%,rgba( "+y.r+","+y.g+", "+y.b+", 0),100%);              background-image: -moz-linear-gradient(top,rgba( "+y.r+","+y.g+", "+y.b+", 1 ) 0%,rgba( "+y.r+","+y.g+", "+y.b+", 0) 100%);              background-image: linear-gradient(to bottom,rgba( "+y.r+","+y.g+", "+y.b+", 1 ) 0%,rgba( "+y.r+","+y.g+", "+y.b+", 0) 100%);              background-repeat: repeat-x;            }            .jgallery .thumbnails.full-screen .next:before {              background-image: -webkit-gradient(linear,left 0%,left 100%,from(rgba( "+y.r+","+y.g+", "+y.b+", 0)),to(rgba( "+y.r+","+y.g+", "+y.b+", 1)));              background-image: -webkit-linear-gradient(top,rgba( "+y.r+","+y.g+", "+y.b+", 0),0%,rgba( "+y.r+","+y.g+", "+y.b+", 1),100%);              background-image: -moz-linear-gradient(top,rgba( "+y.r+","+y.g+", "+y.b+", 0) 0%,rgba( "+y.r+","+y.g+", "+y.b+", 1) 100%);              background-image: linear-gradient(to bottom,rgba( "+y.r+","+y.g+", "+y.b+", 0) 0%,rgba( "+y.r+","+y.g+", "+y.b+", 1) 100%);              background-repeat: repeat-x;            }            .jgallery .thumbnails.images a:after {              background: rgb("+v.r+","+v.g+", "+v.b+");            }            .jgallery .thumbnails.full-screen .prev,            .jgallery .thumbnails.full-screen .next {              background: rgb("+y.r+","+y.g+", "+y.b+");            }            .jgallery .thumbnails.square a {              background: rgb("+w.r+","+w.g+", "+w.b+");              color: rgb("+y.r+","+y.g+", "+y.b+");            }            .jgallery .overlayContainer .overlay {              background: rgb("+y.r+","+y.g+", "+y.b+");              color: rgb("+w.r+","+w.g+", "+w.b+");            }            .jgallery .overlayContainer .imageLoaderPositionAbsolute:after {              border-color: rgba("+w.r+","+w.g+", "+w.b+", .5 );            }            .jgallery .thumbnails-horizontal .prev {              background: rgb("+v.r+","+v.g+", "+v.b+");            }            .jgallery .thumbnails-horizontal .prev:before {              background-image: -webkit-gradient(linear,0% top,100% top,from(rgba( "+v.r+","+v.g+", "+v.b+", 1 )),to(rgba( "+v.r+","+v.g+", "+v.b+", 0 )));              background-image: -webkit-linear-gradient(left,color-stop(rgba( "+v.r+","+v.g+", "+v.b+", 1 ) 0%),color-stop(rgba( "+v.r+","+v.g+", "+v.b+", 0 ) 100%));              background-image: -moz-linear-gradient(left,rgba( "+v.r+","+v.g+", "+v.b+", 1 ) 0%,rgba( "+v.r+","+v.g+", "+v.b+", 0 ) 100%);              background-image: linear-gradient(to right,rgba( "+v.r+","+v.g+", "+v.b+", 1 ) 0%,rgba( "+v.r+","+v.g+", "+v.b+", 0 ) 100%);              background-repeat: repeat-x;            }            .jgallery .thumbnails-horizontal .next {              background: rgb("+v.r+","+v.g+", "+v.b+");            }            .jgallery .thumbnails-horizontal .next:before {              background-image: -webkit-gradient(linear,0% top,100% top,from(rgba( "+v.r+","+v.g+", "+v.b+", 0 )),to(rgba( "+v.r+","+v.g+", "+v.b+", 1 )));              background-image: -webkit-linear-gradient(left,color-stop(rgba( "+v.r+","+v.g+", "+v.b+", 0 ) 0%),color-stop(rgba( "+v.r+","+v.g+", "+v.b+", 1 ) 100%));              background-image: -moz-linear-gradient(left,rgba( "+v.r+","+v.g+", "+v.b+", 0 ) 0%,rgba( "+v.r+","+v.g+", "+v.b+", 1 ) 100%);              background-image: linear-gradient(to right,rgba( "+v.r+","+v.g+", "+v.b+", 0 ) 0%,rgba( "+v.r+","+v.g+", "+v.b+", 1 ) 100%);              background-repeat: repeat-x;            }            .jgallery .thumbnails-vertical .prev {              background: rgb("+v.r+","+v.g+", "+v.b+");            }            .jgallery .thumbnails-vertical .prev:before {              background-image: -webkit-gradient(linear,left 0%,left 100%,from(rgba( "+v.r+","+v.g+", "+v.b+", 1 )),to(rgba( "+v.r+","+v.g+", "+v.b+", 0 )));              background-image: -webkit-linear-gradient(top,rgba( "+v.r+","+v.g+", "+v.b+", 1 ),0%,rgba( "+v.r+","+v.g+", "+v.b+", 0 ),100%);              background-image: -moz-linear-gradient(top,rgba( "+v.r+","+v.g+", "+v.b+", 1 ) 0%,rgba( "+v.r+","+v.g+", "+v.b+", 0 ) 100%);              background-image: linear-gradient(to bottom,rgba( "+v.r+","+v.g+", "+v.b+", 1 ) 0%,rgba( "+v.r+","+v.g+", "+v.b+", 0 ) 100%);              background-repeat: repeat-x;            }            .jgallery .thumbnails-vertical .next {              background: rgb("+v.r+","+v.g+", "+v.b+");            }            .jgallery .thumbnails-vertical .next:before {              background-image: -webkit-gradient(linear,left 0%,left 100%,from(rgba( "+v.r+","+v.g+", "+v.b+", 0 )),to(rgba( "+v.r+","+v.g+", "+v.b+", 1 )));              background-image: -webkit-linear-gradient(top,rgba( "+v.r+","+v.g+", "+v.b+", 0 ),0%,rgba( "+v.r+","+v.g+", "+v.b+", 1 ),100%);              background-image: -moz-linear-gradient(top,rgba( "+v.r+","+v.g+", "+v.b+", 0 ) 0%,rgba( "+v.r+","+v.g+", "+v.b+", 1 ) 100%);              background-image: linear-gradient(to bottom,rgba( "+v.r+","+v.g+", "+v.b+", 0 ) 0%,rgba( "+v.r+","+v.g+", "+v.b+", 1 ) 100%);              background-repeat: repeat-x;            }            </style>        "}})(jQuery);